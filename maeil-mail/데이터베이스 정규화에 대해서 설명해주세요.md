# 데이터베이스 정규화에 대해서 설명해주세요

## 요약

### 1. 정의

- 정규화는 데이터 중복을 최소화하고, `이상 현상`을 방지하기 위해 테이블을 구조적으로 분해하는 과정이다.
- 즉, 정규화를 통해 테이블 설계를 쳬계화하여 `데이터 일관성`과 `무결성`을 보장하는 것이 목적이다.

### 2. 정규화의 필요성

- 이상 현상: 정규화를 하지 않아 생길 수 있는 문제
    - 삽입 이상(Insertion Anomaly): 불필요한 데이터까지 함께 입력해야 하는 문제
    - 갱신 이상(Update Anomaly): 중복된 데이터 중 일부만 수정되어 일관성이 깨짐
    - 삭제 이상(Deletion Anomaly): 한 데이터를 삭제할 때, 다른 연관된 데이터까지 함께 삭제됨

### 3. 정규화의 단계별 형태

| 단계                            | 조건                              | 핵심 내용                                                       |
|-------------------------------|---------------------------------|-------------------------------------------------------------|
| 1NF (제1정규형)                   | 모든 컬럼이 원자값(Atomic Value)만 가져야 함 | 예: 배열, 리스트 형태의 데이터 금지                                       |
| 2NF (제2정규형)                   | 부분 함수 종속 제거                     | 기본키가 복합키일 때, 일부 키에만 종속된 속성 제거                               |
| 3NF (제3정규형)                   | 이행 함수 종속 제거                     | A → B, B → C 관계에서 A → C 제거 (즉, 비키 속성이 다른 비키 속성에 종속되지 않도록 함) |
| BCNF (Boyce-Codd Normal Form) | 모든 결정자가 후보키                     | 3NF보다 더 엄격한 형태로, 결정자가 후보키가 아닌 경우 제거                         |

### 4. 예시

1. 1정규형

| 학생ID | 이름 | 수강과목         |
|------|----|--------------|
| 1    | 철수 | 데이터베이스, 운영체제 |
| 2    | 영희 | 알고리즘         |

- 철수에 수강과목에 데이터베이스와 운영체제처럼 여러 값이 들어가 있으므로 `원자성`을 위반

| 학생ID | 이름 | 수강과목   |
|------|----|--------|
| 1    | 철수 | 데이터베이스 |
| 1    | 철수 | 운영체제   |
| 2    | 영희 | 알고리즘   |

- 따라서 다음처럼 필드 값이 하나만 가지도록 변경

2. 2정규형

| 학생ID | 과목ID | 학생이름 | 과목이름 | 점수 |
|------|------|------|------|----|
| 1    | A    | 철수   | DB   | 90 |
| 1    | B    | 철수   | OS   | 80 |

- 기본키는 복합키로 `학생ID`와 `과목ID`로 구성됨
- 허나 학생이름은 학생 복합키의 일부인 `학생ID`에, 과목이름은 복합키의 일부인 과목 ID에 부분적으로 종속되어있음.
- 즉, `부분 종속`이 발생함.

| 학생ID | 학생이름 |
|------|------|
| 1    | 철수   |

| 과목ID | 과목이름 |
|------|------|
| A    | DB   |
| B    | OS   |

| 학생ID | 과목ID | 점수 |
|------|------|----|
| 1    | A    | 90 |
| 1    | B    | 80 |

- 따라서 위 처럼 핵생, 과목, 성적 테이블로 명확히 역할을 분리하여 중복이 사라지게 함.

3. 3정규형

| 학생ID | 학생이름 | 학과ID | 학과이름   |
|------|------|------|--------|
| 1    | 철수   | 10   | 컴퓨터공학과 |
| 2    | 영희   | 20   | 전자공학과  |

- 기본키는 `학생ID`
- `학생이름`은 `학생ID`를 통해서 알 수 있고, `학과이름`은 `학과ID`를 통해서만 알 수 있음
- 즉, `학생ID` -> `학과ID` -> `학과이름`와 같이 `이행적 종속`이 발생함

| 학생ID | 학생이름 | 학과ID |
|------|------|------|
| 1    | 철수   | 10   |
| 2    | 영희   | 20   |

| 학과ID | 학과이름   |
|------|--------|
| 10   | 컴퓨터공학과 |
| 20   | 전자공학과  |

- 다음처럼 `학과이름`은 오로지 `학과ID`에만 종속되도록 분리

4. BCNF (Boyce-Codd Normal Form)

| 교수  | 과목 | 강의실 |
|-----|----|-----|
| 김교수 | DB | 101 |
| 이교수 | OS | 102 |
| 김교수 | AI | 101 |

- 한 강의실에서는 한 명의 교수만 수업이 가능함 (강의실 -> 교수)
- 한 교수는 여러 과목을 가르칠 수 있음 (교수 -> 과목)
- 즉, 강의실 -> 교수에서 결정자 `강의실`이 후보키가 아님 -> BCNF 위반

| 강의실 | 교수  |
|-----|-----|
| 101 | 김교수 |
| 102 | 이교수 |

| 교수  | 과목 |
|-----|----|
| 김교수 | DB |
| 김교수 | AI |
| 이교수 | OS |

- 모든 함수 종속의 결정자가 후보키로 바뀌어 BCNF를 만족함.

### 5. 요약표

| 단계       | 핵심 조건       | 제거되는 종속성   | 예시 문제           |
|----------|-------------|------------|-----------------|
| **1NF**  | 원자값만 저장     | 반복 그룹      | 여러 값이 한 칸에 저장됨  |
| **2NF**  | 부분 함수 종속 제거 | 복합키 일부 종속  | 학생이름이 학생ID에만 의존 |
| **3NF**  | 이행적 종속 제거   | 비키→비키 종속   | 학과이름이 학과ID에 의존  |
| **BCNF** | 모든 결정자는 후보키 | 후보키 아닌 결정자 | 강의실→교수 관계       |

### 6. 장단점

| 장점             | 단점                     |
|----------------|------------------------|
| 데이터 중복 최소화     | 조인(Join)이 많아져 성능 저하 가능 |
| 데이터 무결성 유지     | 복잡한 쿼리 구조              |
| 삽입·갱신·삭제 이상 방지 | OLAP(분석용 DB)에는 부적합     |

## 발화

정규화는 데이터 중복을 줄이고 이상 현상을 방지하기 위해 테이블을 구조적으로 분리하는 과정입니다.

1정규화는 모든 칼럼이 하나의 필드값 즉 원자값만 가져야 한다는 것이고,
2정규화는 기본키가 복합키일 때, 일부 키에만 종속된 속성 즉, 부분 함수 종속을 제거하는 것이고,
3정규화는 A->B, B->C의 관계어서 A->C의 관계를 제거하는 즉, 이행 함수 종속을 제거하는 것이고,
BCNF는 모든 결정자가 모든 결정자가 후보키로 만드는 것입니다.

정규화를 통해 무결성과 일관성을 확보할 수 있지만, 동시에 조인이 많아져 복잡한 쿼리 구조로 인한 성능 저하가 존재하기도 합니다.

