# 전략 패턴에 대해서 설명해주세요

## 요약

### 1. 정의

- 전략 패턴은 동일 목적(알고리즘)의 여러 구현을 캡슐화하고, 런타임에 해당 구현(전략)을 교체할 수 있도록 만드는 행위 디자인 패턴이다.
- 행위 패턴에 속하며, 객체 간의 행위를 유연하게 바꾸는 데 목적이 있다.
- 예를 들어, 자바에서 인터페이스를 정의하고 인터페이스를 구현하여 구현체들로 주입하는 것이 전략 패턴의 대표적인 형태이다.

### 2. 구성요소

- Strategy(전략 인터페이스): 알고리즘의 공통 인터페이스(메서드)를 정의
- ConcreteStrategy(구현체): Strategy를 구현한 구체 알고리즘 클래스들
- Context(문맥): Strategy 인터페이스를 사용하여 알고리즘을 호출. 런타임에 Strategy를 주입 및 교체함

### 3. 의도 및 장점

- 알고리즘을 캡슐화해서 클라이언트가 알고리즘 구현에 의존하지 않게 함 -> 결합도 감소
- 새로운 알고리즘 추가 시 기존 코드 변경 최소화 -> OCP 원칙 준수
- 런타임에 알고리즘 교체 가능 (유연성 증가)
- 테스트하기 쉬움: 각 전략을 단위 테스트로 독립 검증 가능

### 4. 단점 및 고려사항

- 전략이 많아지면 클래스 수가 늘어남 -> 복잡도 증가
- 전략 선택 로직이 Context 밖으로 흩어지면 관리가 어려울 수 있음
- 간단한 조건문으로 해결 가능한 경우 오히려 과할 수 있음

### 5. 언제 쓰나?

- 동일한 목적을 여러 방법으로 구현해야할 때
- 런타임에 정책을 변경하거나 외부 설정/DI로 알고리즘을 주입하고 싶을 때

### 6. 예시

1. 전략 인터페이스
    ```java
    //OAuthPayStrategy.java
    public interface OAuthPayStrategy {
        void pay(int amount, String orderId);
    }
    ```

2. 구현체: 카카오페이
    ```java
    // KakaoPayStrategy.java
    public class KakaoPayStrategy implements OAuthPayStrategy {
        @Override
        public void pay(int amount) {
            System.out.println("[KakaoPay] " + amount + "원 결제 완료");
        }
    }
    ```

3. 구현체: 네이버페이
    ```java
    public class NaverPayStrategy implements OAuthPayStrategy {
        @Override
        public void pay(int amount) {
            System.out.println("[NaverPay] " + amount + "원 결제 완료");
        }
    }
    ```

4. 컨텍스트
    ```java
    public class PaymentContext {
        private OAuthPayStrategy strategy;
    
        public PaymentContext(OAuthPayStrategy strategy) {
            this.strategy = strategy;
        }
    
        public void setStrategy(OAuthPayStrategy strategy) {
            this.strategy = strategy;
        }
    
        public void checkout(int amount) {
            strategy.pay(amount);
        }
    }
    ```

5. 실행
    ```java
    public class Main {
        public static void main(String[] args) {
            PaymentContext context = new PaymentContext(new KakaoPayStrategy());
            context.checkout(10000); // 카카오페이 결제
    
            context.setStrategy(new NaverPayStrategy());
            context.checkout(20000); // 네이버페이 결제
        }
    }
    ```

## 발화

전략 패턴은 같은 목적의 알고리즘들을 각각의 클래스로 분리해서 캡슐화하고, 이들을 컨텍스트에 주입함으로써 런타임에 쉽게 교체할 수 있도록 하는 디자인 패턴입니다.

예를 들어 결제 방식을 각각의 전략으로 만ㄷ르고 주문 처리 시 어떤 전략을 쓸지 선택해 주입하면 주문 로직은 결제 방식 변경 없이 재사용이 가능합니다.

장점으론 알고리즘별 책임이 분리되어 유지보수성이 좋아지지만, 단점으론 전략 클래스가 늘어나고 전략 선택 로직을 잘 설계해야한다는 점입니다.

## 추가 학습 자료

- https://www.maeil-mail.kr/question/177

