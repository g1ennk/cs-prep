# CQRS 패턴이란 무엇인가요?

## 요약

### 1. 정의

1. 정의
    - CQRS(Command Query Responsibility Segregation)
        - 명령(Command)과 조회(Query)의 책임을 분리하는 아키텍처 패턴
        - 전통적인 CRUD 방식은 동일한 데이터 모델을 이용해 읽기와 쓰기를 모두 처리하지만, CQRS는 쓰기 모델과 읽기 모델을 분리함

2. 구성 요소
    - Command 모델 (쓰기 모델)
        - 상태를 변경하는 작업(Insert, Update, Delete) 담당
        - 비즈니스 로직과 트랜잭션 규칙에 집중
    - Query 모델 (읽기 모델)
        - 단순히 데이터 조회 전용으로 최적화된 모델
        - 복잡한 조인 대신 조회 선능을 높이는 방식 (캐시, 읽기 DB, NoSQL)

### 2. 장단점

- 장점
    - 읽기/쓰기 트래픽 분리 -> 성능 최적화 가능
    - 높은 확장성 -> 읽기와 쓰기를 개별적으로 확장
    - 복잡한 조회 최적화 -> 조회 전용 DB, 캐시 활용 가능
    - 비즈니스 로직 명확화 -> Command는 상태 변경, Query는 조회
- 단점
    - 아키텍처 복잡도 증가(데이터 동기화 이슈)
    - 결국 데이터 일관성 문제 발생 가능성 존재
    - 많은 구현 코드, 더 많은 구현 기술 필요로 오버엔지니어링 가능성 존재
- 활용 예시
    - 명령 모델은 도메인 모델을 구현하는데 유리한 JPA를 사용
    - 조회 모델은 SQL 데이터 조회에 유리한 MyBatis를 사용

## 발화

CQRS는 Command와 Query 책임을 분리하는 아키텍처 패턴입니다.

전통적인 CRUD 방식은 동일한 모델이 읽기와 쓰기를 모두 처리하지만, CQRS는 쓰기 모델은 상태 변경에, 읽기 모델은 조회 성능 최적화에 집중합니다.

장점으로는 읽기와 쓰기 트래픽 분리로 성능과 확장성을 얻을 수 있습니다.

하지만 데이터 동기화와 일관성 문제가 생길 수 있고 작은 서비스에서는 오버 엔지니어링이 될 수 있습니다.

## 추가 학습 자료

- https://www.maeil-mail.kr/question/187