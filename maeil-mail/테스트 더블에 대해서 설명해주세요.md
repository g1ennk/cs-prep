# 테스트 더블에 대해서 설명해주세요

## 요약

### 매일메일

- 테스트 더블
    - 테스트 코드에서 실제 의존성을 사용하기 어려운 경우 테스트 더블을 사용할 수 있다.
    - 테스트 더블은, 의존성을 시뮬레이션하지만, 테스트에 더욱 적합하게 사용할 수 있도록 만든다.
    - 테스트 더블은 테스트로부터 외부 세계를 보호하고, 또 반대로 외부로부터 테스트를 보호하며, 복잡한 설정을 단순화할 수 있도록 해주는 가짜 의존성이다.
    - 실제 의존성을 포함하는 테스트의 단점
        - 외부 세계의 부수 효과 유발
        - 외부 세계에 의존적이기 때문에 비결정적인 동작 유발
        - 실제 의존성 포함을 위해 복잡한 설정 필요
- 테스트 더블의 종류
    - 더미: 아무런 동작이 없고 인스턴스화된 객체만 필요한경우 사용
    - 스텁: 구현을 단순한 것으로 대체히야 테스트에 맞게 단순화된 동작 수행
    - 페이크: 제품에는 적합하지 않지만, 실제 동작하는 구현 제공
    - 스파이: 호출된 내역을 기록하여 테스트 결과를 검증할 때 주로 사용
    - 목: 기대한 대로 상호작용하는지 행위를 검증

### LLM

1. 정의
    - 테스트 더블은 테스트 대상 코드가 의존하는 객체를 테스트 목적으로 대체하는 가짜 객체를 말한다.
    - 즉, 실체 객체를 대신하는 테스트용 객체이다.

2. 왜 필요한가?
    - 단위 테스트에서는 외부 요인을 배제해야 함
    - 실제 객체를 사용하면 테스트 속도도 느려지고 예측 불가능한 결과가 발생할 수 있음
    - 따라서 독립적이고 빠른 테스트 환경을 위해 더블을 사용함
    - 즉, 테스트 더블은 `테스트의 독립성`과 `재현성`을 보장하는 핵심 수단

3. 테스트 더블의 5가지 종류
   | 유형 | 테스트 목적 | 검증 포인트 |
   | ----- | --------- | ------------- |
   | Dummy | 형식만 맞추기 | 호출되지 않음 |
   | Fake | 간단한 대체 구현 | 실제처럼 동작하지만 가짜 |
   | Stub | 리턴값 고정 | 출력 값 검증 |
   | Spy | 호출 여부 기록 | 호출 횟수, 순서 검증 |
   | Mock | 행위 자체 검증 | 기대 동작 시나리오 검증 |

4. 테스트 더블 사용의 이점
   | 장점 | 설명 |
   | -------- | ------------------------- |
   | ✅ 독립성 | 외부 시스템(DB, 네트워크)에 의존하지 않음 |
   | ⚡ 속도 | 실제 I/O가 없으므로 테스트가 매우 빠름 |
   | 🧩 재현성 | 테스트 결과가 환경에 영향받지 않음 |
   | 🔁 회귀 방지 | Mocking으로 이전 로직 변경 검출 가능 |

## 발화

테스트 더블은 테스트 시 외부 의존성을 대체하기 위해 사용하는 가짜 객체입니다.

예를 들어 DB나 외부 API를 직접 호출하지 않고, Stub이나 Mock 객체를 만들어 독립적으로 테스트를 수행할 수 있습니다.

Dummy는 단순히 형식을 맞추고, Stub은 고정값을 반환하고, Spy는 호출을 검증하고, Mock은 기대 동작을 검증하고, Fake는 단순 구현체를 제공하는 식입니다.

실제로 Java/Spring 진영에서는 Mockito를 이용해 Repository를 Mocking해서 DB 없이 서비스 로직을 테스트할 때 자주 사용합니다.


